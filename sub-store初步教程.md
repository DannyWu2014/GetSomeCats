# Surge下的Sub-Store初步教程



官方教程链接：https://www.notion.so/Sub-Store-6259586994d34c11a4ced5c406264b46

项目仓库：https://github.com/sub-store-org/Sub-Store

## 免责声明

本文涉及的任何解锁和解密分析脚本仅用于资源共享和学习研究，不能保证其合法性，准确性，完整性和有效性，请根据情况自行判断。

间接使用脚本的任何用户，包括但不限于建立VPS或在某些行为违反国家/地区法律或相关法规的情况下进行传播, 本文作者对于由此引起的任何隐私泄漏或其他后果概不负责。

请勿将本文内的任何内容用于商业或非法目的，否则后果自负。

如果任何单位或个人认为该项目的脚本可能涉嫌侵犯其权利，则应及时通知并提供身份证明，所有权证明，我将在收到认证文件后删除相关脚本。

对任何本文中包含的脚本在使用中可能出现的问题概不负责，包括但不限于由任何脚本错误导致的任何损失或损害．

您必须在下载后的24小时内从计算机或手机中完全删除以上内容。

任何以任何方式查看此项目的人或直接或间接使用该项目的任何脚本的使用者都应仔细阅读此声明。本文作者保留随时更改或补充此免责声明的权利。一旦使用并复制了任何本文相关脚本或其他内容，则视为您已接受此免责声明。

## 简介：

sub-store最早是Peng-YM在loon平台推出的高级订阅管理工具。完全本地解析，无订阅泄露的风险。经过后续发展，现在已经适配了Surge 和 Quantumult X 以及 Shadowrocket、Clash。

## 主要功能

1. 订阅转换
2. 组合订阅
3. 订阅过滤
4. 订阅重命名
5. 订阅排序
6. 订阅同步

## 首次使用
Surge下需要配置根证书、打开MitM开关、Rewrite开关、脚本开关

<img src="./sub-store%E6%95%99%E7%A8%8B.assets/IMG_1460.PNG" alt="IMG_1460" style="zoom:25%;" />

安装下面链接中的模块：

`https://raw.githubusercontent.com/sub-store-org/Sub-Store/e93332048e0678ba0f85d8a42430a87d8bbdf5fc/config/Surge.sgmodule`

安装方法：Surge - 首页 - 通用-模块 - 安装新模块 - 粘贴；（**粘贴链接后**删除链接前/末尾处后可能存在的空格）

将下面链接加入到代理规则，并设置为通过代理的方式

`https://raw.githubusercontent.com/getsomecat/GetSomeCats/Surge/rule/substore.list`

安装方法：Surge - 首页 - 通用-代理规则（出站模式色块中）-新增-增加新规则集-外部规则集

<img src="./sub-store%E6%95%99%E7%A8%8B.assets/iShot_2023-03-26_14.13.18.png" alt="iShot_2023-03-26_14.13.18" style="zoom: 25%;" />

<img src="./sub-store%E6%95%99%E7%A8%8B.assets/iShot_2023-03-26_14.14.35.png" alt="iShot_2023-03-26_14.14.35" style="zoom: 25%;" />

进行完上面两步之后，sub-store的安装就完成了，可以在浏览器中输入：[https://sub.store](https://sub.store/)

如果出现如下图所示的页面，则为安装成功：

<img src="./sub-store%E6%95%99%E7%A8%8B.assets/IMG_1463.PNG" alt="IMG_1463" style="zoom: 25%;" />

如果没有出现上面的页面则有以下可能：

1. 检查Surge是否正确的安装了根证书并信任：「打开Surge」→「首页」→「修改」→「配置跟证书」→「生成新的CA证书」→「安装证书」→「打开Apple系统设置」→「通用」→「底部」→「VPN与设备管理」→「安装证书」→「返回上一级」→「关于本机」→「底部证书信任设置」
2. 检查Surge的MitM、Rewrite、脚本开关是否打开
3. 检查vercel.app这个Domain-Suffix是否走了代理（上面安装的规则）

## 使用Sub-Store

利用safari可以将网页添加到主页面的功能，将sub-store页面添加到主页面上

> Safari浏览器中的“将网页添加到主屏幕”功能可以让用户将喜欢的网页添加为主屏幕上的应用程序图标，以便更轻松地访问该网页。这相当于创建了一个与特定网页相关的“Web应用程序”，可以像其他应用程序一样单独使用，同时也很容易与其他应用程序进行区分。
>
> 
>
> 将网页添加到主屏幕的步骤如下：
>
> 
>
> 1. 在Safari浏览器中打开要添加到主屏幕的网页。
> 2. 点击Safari工具栏上的分享图标。
> 3. 在分享菜单中，选择“将网页添加到主屏幕”选项。
> 4. 在弹出的对话框中，输入您希望在主屏幕上显示的应用程序名称，然后单击“添加”按钮。
> 5. 现在，您将在主屏幕上看到一个新的应用程序图标，当您点击它时，它将打开您刚才添加的网页。
>
> 
>
> 该功能的好处在于它帮助用户更轻松地访问其最喜欢的网站，并且可以将多个网页与其他应用程序分开。此外，它还可以更好地利用屏幕空间，因为该应用程序的图标只需要占据一个小的屏幕空间，就可以访问相应的网页。

<img src="./sub-store%E6%95%99%E7%A8%8B.assets/iShot_2023-03-26_14.41.33-9813956.png" alt="iShot_2023-03-26_14.41.33" style="zoom:25%;" />

<img src="./sub-store%E6%95%99%E7%A8%8B.assets/iShot_2023-03-26_14.46.49-9813956.png" alt="iShot_2023-03-26_14.46.49" style="zoom:25%;" />

<img src="./sub-store%E6%95%99%E7%A8%8B.assets/iShot_2023-03-26_14.48.55-9813956.png" alt="iShot_2023-03-26_14.48.55" style="zoom:25%;" />

<img src="./sub-store%E6%95%99%E7%A8%8B.assets/iShot_2023-03-26_14.50.08-9813956.png" alt="iShot_2023-03-26_14.50.08" style="zoom:25%;" />

<img src="./sub-store%E6%95%99%E7%A8%8B.assets/iShot_2023-03-26_14.51.54-9813956.png" alt="iShot_2023-03-26_14.51.54" style="zoom:67%;" />

## 使用过程：

如图所示，你可以将你的机场订阅在该**订阅配置**页面对节点进行一系列操作：UDP转发/跳过证书验证/TCP Fast Open/Vmess AEAD 强制开启与关闭；以及，对节点进行操作，添加/去除国旗、使用正则表达式对节点进行排序、过滤、删除、重命名、去重，再高级一点再额外加入一层脚本过滤器/脚本操作；

全部设置完毕后，保存，最后会生成纯**nodelist**，即原始订阅内包含的所有节点通过正则过滤、删除、排序由、重命名后得到的节点的集合；

![iShot_2023-03-26_16.06.01](./sub-store%E6%95%99%E7%A8%8B.assets/iShot_2023-03-26_16.06.01.png)

如果你拥有多个机场，按照上述步骤重复进行即可。

附上Sub-store的一些操作说明见下图：

<img src="./sub-store%E6%95%99%E7%A8%8B.assets/iShot_2023-03-26_16.34.22.png" alt="iShot_2023-03-26_16.34.22" style="zoom: 33%;" />

快速预览操作前后的变化（以去掉国旗为例）：

![2023032602](./sub-store%E6%95%99%E7%A8%8B.assets/2023032602.png)



而通过组合订阅可以将多个机场的节点进行合并成一个订阅：

<img src="./sub-store%E6%95%99%E7%A8%8B.assets/2023032603.png" alt="2023032603" style="zoom: 67%;" />

## 在Surge中进行订阅：

首先按照上面图示的复制订阅，然后在Surge - 首页 - 通用 - 出站模式 - 代理服务器 - 滑至底部 - 新的策略组 - 组名称（例如墙洞）- 滑至底部 - 使用外部代理列表 - 开启 - 外部代理列表 - 粘贴刚刚复制的**订阅链接**，点击右上角完成进行保存，操作即完成了。

<img src="./sub-store%E6%95%99%E7%A8%8B.assets/iShot_2023-03-26_17.45.38.png" alt="iShot_2023-03-26_17.45.38" style="zoom:50%;" />

至此在Surge中使用Sub-store的步骤已经全部完成，至于其它想要对节点进行其它操作，在新手阶段不是很建议，等熟悉操作后再进行吧，也可以进[surge](https://t.me/SurgeCommunity)群进行学习，也可以来我的[整点猫咪](https://t.me/+xPEp7i13b1FjNjk0)群里聊天。
